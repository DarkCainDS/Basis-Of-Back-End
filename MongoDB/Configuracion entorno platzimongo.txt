ConfiguraciÃ³n e instalaciÃ³n de dependencias para el proyecto PlatziMongo

Â¡Hola! Ahora vamos a aplicar todo lo aprendido durante el curso en la creaciÃ³n de un proyecto que usarÃ¡ MongoDB. Â¡No te preocupes! Este mÃ³dulo es completamente opcional, si quieres puedes saltarte al siguiente mÃ³dulo. El examen no incluye preguntas sobre este mÃ³dulo ğŸ˜‰.

ğŸ Â¡Crearemos una pequeÃ±a API desarrollada con Python la cual simularÃ¡ ser un mini Platzi! Esta es una aplicaciÃ³n backend que se comunicarÃ¡ con nuestra base de datos mediante el driver Pymongo. En esta clase aprenderÃ¡s a cÃ³mo instalar y configurar todas las herramientas que necesitarÃ¡s para trabajar el proyecto de PlatziMongo. En resumen, esto es lo que haremos:

Descargaremos el cÃ³digo base de nuestro proyecto desde GitHub.
Instalaremos Postman para facilitarnos interactuar con nuestra API.
Crearemos un entorno virtual con Python.
Instalaremos las dependencias de nuestro proyecto.
Â¡Estableceremos las configuraciones finales para que nuestro proyecto empiece a funcionar!
Â¡AsÃ­ que vamos a ello!

Clonando el repositorio del proyecto
Lo primero que necesitamos hacer es clonar el repositorio del proyecto, esto lo puedes hacer con el siguiente comando en la carpeta de tu preferencia:

git clone https://github.com/AERC18/platzi-mongo
Este repositorio incluye el cÃ³digo base de nuestro proyecto, en las prÃ³ximas clases nos encargaremos de completarlo aÃ±adiendo las consultas necesarias a nuestra base de datos.

Adicionalmente, puedes ver el cÃ³digo de cada clase en las diferentes ramas que incluye este proyecto. Puedes ver las ramas ejecutando el siguiente comando dentro de la carpeta del mismo:

git branch
InstalaciÃ³n de Postman
Ya que tenemos el cÃ³digo base de nuestra mini API descargado, ahora necesitamos una manera de comunicarnos con ella. Recuerda que este cÃ³digo que descargamos es de una aplicaciÃ³n backend que se comunicarÃ¡ con nuestra base de datos en Mongo, y como toda aplicaciÃ³n backend, esta necesita recibir solicitudes HTTP para realizar las acciones necesarias.

PodrÃ­amos hacer una aplicaciÃ³n frontend que se encargue de mandar estas solicitudes, o podrÃ­amos apoyarnos de herramientas como Postman que se encargan de mandar estas solicitudes hacia cualquier backend, asÃ­ nos ahorramos el tener que programar una aplicaciÃ³n frontend ğŸ˜‰.

A continuaciÃ³n te explico los pasos para que descargues Postman:

Ve a su pÃ¡gina oficial en https://www.getpostman.com/downloads/ y dale click al botÃ³n de â€œDownload Appâ€
Postman
Ejecuta el instalador, Postman se instalarÃ¡ y configurarÃ¡ automÃ¡ticamente, tÃº solo espera.
Postman Installing
Â¡Ya tienes instalado Postman! Te recomiendo crear una cuenta para usar Postman. Puedes registrarte por medio de las opciones que te da Postman cuando se abre, o puedes clicar en la opciÃ³n â€œSkip an go to the appâ€ para saltarte este paso:
Register Postman.png
Hasta este punto ya deberÃ­as tener el programa instalado en tu computadora. En Postman podemos crear algunas solicitudes HTTP de ejemplo y compartirlas con otras personas para que ellos solo tengan que ejecutarlas. Yo he creado algunas solicitudes de ejemplo para nuestro proyecto, a continuaciÃ³n te las comparto y te explico cÃ³mo importarlas en tu cliente de Postman:

Primero debemos seleccionar un Workspace dentro de Postman, para ello abrimos la pestaÃ±a â€œWorkspaceâ€ y seleccionamos â€œMy Workspaceâ€.
Workspace tab.png
En el panel de la derecha hacemos click en el botÃ³n que dice â€œImportâ€ y en la ventana emergente que nos aparece seleccionamos la pestaÃ±a â€œLinkâ€, ahÃ­ pegaremos el siguiente enlace: https://raw.githubusercontent.com/platzi/mongodb-2019/main/PlatziMongo.json
Import collection.png
Damos click al botÃ³n â€œContinueâ€ y Â¡listo! Con eso ya deberÃ­as tener las solicitudes de prueba importadas en tu Postman, en las siguientes clases te mostrarÃ© cÃ³mo usarlas ğŸ˜‰.
Recuerda que puedes profundizar mÃ¡s en el funcionamiento de Postman en el Curso de Postman.

Creando un ambiente virtual para nuestro proyecto
Ahora que ya tenemos Postman instalado y nuestro cÃ³digo base descargado es necesario que instalemos las dependencias para el mismo. Para ello, como en todo buen proyecto con Python, crearemos un ambiente virtual. Es importante recalcar que para esto debes tener instalada una versiÃ³n de Python superior a la versiÃ³n 3.3. Puedes aprender a cÃ³mo instalar Python segÃºn tu sistema operativo en nuestro Curso BÃ¡sico de Python ğŸ’ª.

Para crear nuestro ambiente virtual debemos ejecutar este comando desde dentro de la carpeta de nuestro proyecto:

python3 -m venv venv
Con el ambiente creado, ahora debemos activarlo, para ello podemos hacerlo con el siguiente comando si estÃ¡s en Windows:

.\venv\Scripts\activate
O con el siguiente comando, en caso de que estes en Linux o macOS:

source venv/bin/activate
Te puedes asegurar de que tu entorno virtual estÃ¡ activo viendo que a la izquierda de tu terminal aparece su nombre entre parÃ©ntesis. Para desactivar el ambiente virtual puedes lograrlo con el siguiente comando:

deactivate
Otra forma de crear ambientes virtuales con Python es mediante el uso de Anaconda. Puedes profundizar mÃ¡s en el tema de ambientes virtuales en el Curso de Python Intermedio, pero para este proyecto, con lo que te he explicado aquÃ­ basta ğŸ˜‰.

InstalaciÃ³n de las dependencias del proyecto
Ya que tenemos el ambiente virtual creado en nuestro proyecto debes activarlo para poder instalar las dependencias. Para instalarlas es tan simple como correr el siguiente comando asegurÃ¡ndote de que tu entorno virtual estÃ¡ activo:

pip3 install -r requirements.txt
ActivaciÃ³n del ambiente virtual
En caso de que tengas algÃºn error solo ejecuta el comando de nuevo, pip se encargarÃ¡ de solucionarlo en la primera incidencia.

Variables de entorno necesarias para ejecutar el proyecto
Por Ãºltimo, para que el proyecto se ejecute sin errores es necesario exportar las variables de entorno que se muestran a continuaciÃ³n, simplemente ejecuta cada una en tu terminal:

export FLASK_APP=platzi-api
export FLASK_ENV=development
export PLATZI_DB_URI="MONGO-URI"
Debes reemplazar MONGO-URI por la URI de MongoDB atlas en el siguiente formato:

mongodb+srv://<TU-USUARIO>:<TU-CONTRASEÃ‘A>@<TU-ATLAS-URI>
Ejemplo:

mongodb+srv://m220student:m220password@mflix-5zlol.mongodb.net
Cuando hayas ejecutado todas las variables de entorno ejecuta el siguiente comando para que la aplicaciÃ³n empiece a correr:

flask run
De esta manera se ejecutarÃ¡ un servidor de desarrollo apuntando a http://127.0.0.1:5000 el cual contendrÃ¡ nuestra API lista para empezar a trabajar ğŸ˜‰.

De esta forma terminamos la configuraciÃ³n de nuestro entorno de desarrollo. No olvides abrir el proyecto en tu editor de cÃ³digo preferido, en mi caso usarÃ© Pycharm, pero tÃº puedes usar Visual Studio Code si asÃ­ lo deseas.